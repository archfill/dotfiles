# =============================================
# キーバインド設定
# =============================================

# 設定ファイルをリロードする
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

# C-a*2でtmux内のプログラムにC-aを送る
bind C-a send-prefix

# 新しいペイン表示時にディレクトリ引き継ぎ
bind c new-window -c "#{pane_current_path}"

# | でペインを縦に分割する
bind | split-window -hc "#{pane_current_path}"

# - でペインを横に分割する
bind - split-window -vc "#{pane_current_path}"

# ペインの分割をより直感的に（Shift + \ と Shift + - でも可能）
bind '\' split-window -hc "#{pane_current_path}"
bind '_' split-window -vc "#{pane_current_path}"

# Vimのキーバインドでペインを移動する
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ウィンドウ移動をCtrl+矢印キーでも可能に
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# ペインの移動をAlt+矢印キーでも可能に（プレフィックス不要）
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Vimのキーバインドでペインをリサイズする
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ペインサイズをより細かく調整
bind -r Left resize-pane -L 1
bind -r Down resize-pane -D 1
bind -r Up resize-pane -U 1
bind -r Right resize-pane -R 1

# ペインを最大化/最小化
bind m resize-pane -Z

# ペインを閉じる（確認なし）
bind x kill-pane

# ウィンドウを閉じる（確認なし）
bind X kill-window

# セッションを閉じる
bind q confirm-before -p "kill-session #S? (y/n)" kill-session

# コピーモードの操作をvi風に設定する
setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi Escape send-keys -X cancel

# コピーモードを開始
bind Space copy-mode
bind C-Space copy-mode

# ペーストを実行
bind p paste-buffer
bind C-p choose-buffer

# 直前のウィンドウに移動
bind Tab last-window

# セッション間の移動を簡単に
bind s choose-session
bind S new-session

# ペインのレイアウトを切り替え
bind o select-layout "active-only"
bind M-- select-layout "even-vertical"
bind M-| select-layout "even-horizontal"
bind M-r rotate-window

# シンクロの開始と終了を別のキーに登録する
bind y set-window-option synchronize-panes on \; display "Sync ON"
bind Y set-window-option synchronize-panes off \; display "Sync OFF"

# ペインの番号を表示
bind i display-panes

# 時計を表示
bind t clock-mode